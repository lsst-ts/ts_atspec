$schema: http://json-schema.org/draft-07/schema#
$id: https://github.com/lsst-ts/ts_atspec/blob/master/schema/ATSpectrograph.yaml
# title must end with one or more spaces followed by the schema version, which must begin with "v"
title: ATSpectrograph v2
description: Schema for ATSpectrograph configuration files
type: object
properties:
  instrument_port:
    description: The port on which the instrument mounted on the telescope
    type: number
    default: 1
  host:
    description: IP of the controller
    type: string
    default: 127.0.0.1
  port:
    decription: Port for the controller
    type: integer
    default: 9999
  min_pos:
    decription: Minimum position for the linear stage (in mm).
    type: number
    default: 0
  max_pos:
    decription: Maximum position for the linear stage (in mm).
    type: number
    default: 1000
  tolerance:
    decription: Tolerance for positioning the linear stage.
    type: number
    default: 0.01

  filters:
    type: object
    properties:
      filter_name:
        decription: Currently installed filter names.
        default:
          - empty_1
          - empty_2
          - diffuser
          - empty_3
        type: array
        uniqueItems: true
        items:
          type: string
        minItems: 4
        maxItems: 4

      filter_central_wavelength:
        description: >
          Wavelength for which optical system will be opimized in units of nm. Approximations are sufficient as the
          focus dependence on wavelength is weak.
        type: array
        items:
          type: number
        minItems: 4
        maxItems: 4
        default:
          - 700
          - 701
          - 702
          - 703

      filter_focus_offset:
        description: >
          Focus offset to be applied on the secondary mirror in units of um, relative to no glass being installed.
          Positive values push the secondary down and increase the back focal distance, therefore adding glass
          thickness will result in positive focus offsets.
        type: array
        uniqueItems: false
        items:
          type: number
        minItems: 4
        maxItems: 4
        default:
          - 0.0
          - 1.0
          - 2.0
          - 3.0

  gratings:
    type: object
    properties:
      name:
        decription: Currently installed grating names.
        default:
          - empty
          - ronchi170lpmm
          - ronchi90lpmm
          - holo_etu1
        type: array
        uniqueItems: true
        items:
          type: string
        minItems: 4
        maxItems: 4
      focus_offset:
        description: >
          Focus offset to be applied on the secondary mirror in units of um, relative to no glass being installed.
          Positive values push the secondary down and increase the back focal distance, therefore adding glass
          thickness will result in positive focus offsets.
        type: array
        uniqueItems: false
        items:
          type: number
        minItems: 4
        maxItems: 4
        default:
          - 0.0
          - 1.1
          - 2.2
          - 3.3

additionalProperties: false
